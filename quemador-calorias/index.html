<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quemador Calor√≠as</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <main>
      <details>
        <summary>‚≠êÔ∏è Explicaci√≥n</summary>
        <p>
          El libro, Convert Anything to Calories, lleg√≥ a la conclusi√≥n de que,
          en promedio, una persona con un dedo indice de 10.8 cm^3 y de 11.7
          gramos necesitar√° muuuchos clicks para conservar la l√≠nea. Se
          requieren 16.7 micromoles de adenos√≠n trifosfato (la mol√©cula que
          transporta energ√≠a entre las c√©lulas) para mover un gramo del cuerpo
          por un segundo, y como hay 7.3 calor√≠as en un mol (la medida de
          cantidad de una sustancia) de adenos√≠n trifosfato, en teor√≠a, cada
          click del mouse deber√≠a quemar 1.42 calor√≠as. Aunque el c√°lculo asume
          el movimiento de todo el m√∫sculo, por lo que la cantidad real puede
          variar un poco.
        </p>
        <p>
          Pero resulta que es s√°bado y tienes hambre. treinta minutos despu√©s te
          llega una pizza (1,835kCal) con una coca (97kCal), tendr√≠as que hacer
          1,360,563 clicks para quemar la cena. Y c√≥mo es s√°bado seguramente
          involucrar√° unas cuantas bebidas alcoh√≥licas: en un Gin & Tonic
          (120kCal) hay 84,507 clicks, y 131,690.14 por cada cerveza que
          consumas. En otras palabras, con 427 clicks en promedio por d√≠a, la
          computadora no es un buen ejercicio.
        </p>
      </details>

      <div class="burner-wrapper">
        <h1>Quemador de calor√≠as</h1>
        <p id="result" class="result"></p>
        <button id="btn-burner" class="btn-burner">
          <span class="fire">üî•</span>
        </button>
      </div>

      <div class="burner-wrapper">
        <h1>Calorias faltantes para una Pizza y CK</h1>
        <p id="result2" class="result"></p>
        <button id="btn-burner2" class="btn-burner">
          <span class="fire">üî•</span>
        </button>
      </div>
    </main>

    <script>
      const createStore = (reducer, initialState) => {
        let state = initialState;
        let updater = () => {};

        const getState = () => state;

        const dispatch = (action) => {
          state = reducer(state, action);
          updater();
        };

        const subscribe = (listener) => {
          updater = listener;
        };

        return {
          getState,
          dispatch,
          subscribe,
        };
      };

      const reducer = (state, action) => {
        switch (action.type) {
          case 'BURN':
            state.burn += action.payload;
            break;

          case 'DISCOUNT':
            state.discount -= action.payload;
            break;

          default:
            state;
            break;
        }
        return state;
      };

      const store = createStore(reducer, { burn: 0, discount: 1360563 });

      store.subscribe(() => {
        store.getState().burn &&
          (window.result.textContent = `${
            store.getState().burn
          } calor√≠as quemadas`);

        store.getState().discount !== 1360563 &&
          (window.result2.textContent = `Te faltan ${
            store.getState().discount
          } calor√≠as`);
      });

      const burn = () => {
        store.dispatch({ type: 'BURN', payload: 1.42 });
      };

      const discountCalories = () => {
        store.dispatch({ type: 'DISCOUNT', payload: 1.42 });
      };

      window['btn-burner'].addEventListener('click', burn);

      window['btn-burner2'].addEventListener('click', discountCalories);
    </script>
  </body>
</html>
